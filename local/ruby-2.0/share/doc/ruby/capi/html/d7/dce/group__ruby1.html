<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ruby: ruby(1) implementation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ruby
   &#160;<span id="projectnumber">2.0.0p247(2013-06-27revision41674)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ruby(1) implementation</div>  </div>
<div class="ingroups"><a class="el" href="../../de/d43/group__embed.html">CRuby Embedding APIs</a></div></div><!--header-->
<div class="contents">

<p>A part of the implementation of ruby(1) command.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga17c49ad88928c1e079350dcceb8d1578"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#ga17c49ad88928c1e079350dcceb8d1578">RUBY_INIT_STACK</a></td></tr>
<tr class="memdesc:ga17c49ad88928c1e079350dcceb8d1578"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience macro to call <a class="el" href="../../de/d43/group__embed.html#gab7d9aa9836c379212b86b985909f7303">ruby_init_stack()</a>.  <a href="#ga17c49ad88928c1e079350dcceb8d1578"></a><br/></td></tr>
<tr class="separator:ga17c49ad88928c1e079350dcceb8d1578"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa939b6f824daf3e455785b9a8b202ec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#gaa939b6f824daf3e455785b9a8b202ec2">ruby_sysinit</a> (int *<a class="el" href="../../df/d77/ruby_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, char ***<a class="el" href="../../df/d77/ruby_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>)</td></tr>
<tr class="memdesc:gaa939b6f824daf3e455785b9a8b202ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the process for ruby(1).  <a href="#gaa939b6f824daf3e455785b9a8b202ec2"></a><br/></td></tr>
<tr class="separator:gaa939b6f824daf3e455785b9a8b202ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fe207a5a5fd5da2bf5948cb084a1c5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#ga2fe207a5a5fd5da2bf5948cb084a1c5b">ruby_init</a> (void)</td></tr>
<tr class="separator:ga2fe207a5a5fd5da2bf5948cb084a1c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba16bea5d2286f98939691138a60ac01"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#gaba16bea5d2286f98939691138a60ac01">ruby_options</a> (int <a class="el" href="../../df/d77/ruby_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, char **<a class="el" href="../../df/d77/ruby_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>)</td></tr>
<tr class="memdesc:gaba16bea5d2286f98939691138a60ac01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes command line arguments and compiles the Ruby source to execute.  <a href="#gaba16bea5d2286f98939691138a60ac01"></a><br/></td></tr>
<tr class="separator:gaba16bea5d2286f98939691138a60ac01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1e7523c41d03fef5f1ed44b4a00c80f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#gaf1e7523c41d03fef5f1ed44b4a00c80f">ruby_executable_node</a> (void *n, int *status)</td></tr>
<tr class="memdesc:gaf1e7523c41d03fef5f1ed44b4a00c80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the return value of <a class="el" href="../../d0/d22/goruby_8c.html#ad306a5b66e3f0a8431e5b32330252db3">ruby_options()</a>.  <a href="#gaf1e7523c41d03fef5f1ed44b4a00c80f"></a><br/></td></tr>
<tr class="separator:gaf1e7523c41d03fef5f1ed44b4a00c80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02a1a8a76248526a956d8c0f9e1f232b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#ga02a1a8a76248526a956d8c0f9e1f232b">ruby_run_node</a> (void *n)</td></tr>
<tr class="memdesc:ga02a1a8a76248526a956d8c0f9e1f232b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the given compiled source and exits this process.  <a href="#ga02a1a8a76248526a956d8c0f9e1f232b"></a><br/></td></tr>
<tr class="separator:ga02a1a8a76248526a956d8c0f9e1f232b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf1116bc38b8f93d03a817df80b16f634"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#gaf1116bc38b8f93d03a817df80b16f634">ruby_show_version</a> (void)</td></tr>
<tr class="memdesc:gaf1116bc38b8f93d03a817df80b16f634"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the version information of the CRuby interpreter to stdout.  <a href="#gaf1116bc38b8f93d03a817df80b16f634"></a><br/></td></tr>
<tr class="separator:gaf1116bc38b8f93d03a817df80b16f634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f9eecd227f5c84b8802578c20fcc07b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dce/group__ruby1.html#ga9f9eecd227f5c84b8802578c20fcc07b">ruby_show_copyright</a> (void)</td></tr>
<tr class="memdesc:ga9f9eecd227f5c84b8802578c20fcc07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the copyright notice of the CRuby interpreter to stdout and <em>exits</em> this process successfully.  <a href="#ga9f9eecd227f5c84b8802578c20fcc07b"></a><br/></td></tr>
<tr class="separator:ga9f9eecd227f5c84b8802578c20fcc07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A part of the implementation of ruby(1) command. </p>
<p>Other programs that embed Ruby interpreter do not always need to use these functions. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga17c49ad88928c1e079350dcceb8d1578"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_INIT_STACK</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="../../d3/d09/ripper_8y.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> variable_in_this_stack_frame; \</div>
<div class="line">    ruby_init_stack(&amp;variable_in_this_stack_frame);</div>
</div><!-- fragment -->
<p>A convenience macro to call <a class="el" href="../../de/d43/group__embed.html#gab7d9aa9836c379212b86b985909f7303">ruby_init_stack()</a>. </p>
<p>Must be placed just after variable declarations </p>

<p>Definition at line <a class="el" href="../../d7/dc0/parse_8y_source.html#l01689">1689</a> of file <a class="el" href="../../d7/dc0/parse_8y_source.html">parse.y</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf1e7523c41d03fef5f1ed44b4a00c80f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ruby_executable_node </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the return value of <a class="el" href="../../d0/d22/goruby_8c.html#ad306a5b66e3f0a8431e5b32330252db3">ruby_options()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>return value of <a class="el" href="../../d0/d22/goruby_8c.html#ad306a5b66e3f0a8431e5b32330252db3">ruby_options()</a>. </td></tr>
    <tr><td class="paramname">status</td><td>pointer to the exit status of this process.</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="../../d0/d22/goruby_8c.html#ad306a5b66e3f0a8431e5b32330252db3">ruby_options()</a> sometimes returns a special value to indicate this process should immediately exit. This function checks if the case. Also stores the exit status that the caller have to pass to exit(3) into <code>*status</code>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the given opaque pointer is actually a compiled source. </td></tr>
    <tr><td class="paramname">0</td><td>if the given value is such a special value. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d3/d57/eval_8c_source.html#l00279">279</a> of file <a class="el" href="../../d3/d57/eval_8c_source.html">eval.c</a>.</p>

<p>References <a class="el" href="../../dd/dd0/eval__intern_8h_source.html#l00024">EXIT_FAILURE</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00031">EXIT_SUCCESS</a>, <a class="el" href="../../d1/d5c/nkf_8h_source.html#l00174">FALSE</a>, <a class="el" href="../../d3/d09/ripper_8y.html#a9444c431b3cb1184e7523fc572f2c758">FIX2INT</a>, <a class="el" href="../../d3/d09/ripper_8y.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>, <a class="el" href="../../d3/d09/ripper_8y.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>, <a class="el" href="../../d3/d09/ripper_8y.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>, <a class="el" href="../../d1/d5c/nkf_8h_source.html#l00175">TRUE</a>, and <a class="el" href="../../d2/d99/win32ole_8c_source.html#l00798">v</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d57/eval_8c_source.html#l00300">ruby_run_node()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2fe207a5a5fd5da2bf5948cb084a1c5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d3/d57/eval_8c_source.html#l00071">71</a> of file <a class="el" href="../../d3/d57/eval_8c_source.html">eval.c</a>.</p>

<p>References <a class="el" href="../../d5/d1d/eval__error_8c_source.html#l00078">error_print()</a>, <a class="el" href="../../dd/dd0/eval__intern_8h_source.html#l00024">EXIT_FAILURE</a>, and <a class="el" href="../../d3/d57/eval_8c_source.html#l00042">ruby_setup()</a>.</p>

<p>Referenced by <a class="el" href="../../d0/d29/main_8c_source.html#l00023">main()</a>, and <a class="el" href="../../dd/daa/pepper__main_8c_source.html#l00405">pruby_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaba16bea5d2286f98939691138a60ac01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ruby_options </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes command line arguments and compiles the Ruby source to execute. </p>
<p>This function does: </p>
<ul>
<li>Processses the given command line flags and arguments for ruby(1) </li>
<li>compiles the source code from the given argument, -e or stdin, and </li>
<li>returns the compiled source as an opaque pointer to an internal data structure</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>an opaque pointer to the compiled source or an internal special value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d7/dce/group__ruby1.html#gaf1e7523c41d03fef5f1ed44b4a00c80f" title="Checks the return value of ruby_options().">ruby_executable_node()</a>. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/d57/eval_8c_source.html#l00091">91</a> of file <a class="el" href="../../d3/d57/eval_8c_source.html">eval.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga02a1a8a76248526a956d8c0f9e1f232b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ruby_run_node </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the given compiled source and exits this process. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if successfully run thhe source </td></tr>
    <tr><td class="paramname">non-zero</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d3/d57/eval_8c_source.html#l00300">300</a> of file <a class="el" href="../../d3/d57/eval_8c_source.html">eval.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f9eecd227f5c84b8802578c20fcc07b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_show_copyright </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the copyright notice of the CRuby interpreter to stdout and <em>exits</em> this process successfully. </p>

<p>Definition at line <a class="el" href="../../d2/d0b/version_8c_source.html#l00151">151</a> of file <a class="el" href="../../d2/d0b/version_8c_source.html">version.c</a>.</p>

<p>References <a class="el" href="../../d2/d0b/version_8c_source.html#l00017">PRINT</a>.</p>

<p>Referenced by <a class="el" href="../../df/d77/ruby_8c_source.html#l01300">process_options()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf1116bc38b8f93d03a817df80b16f634"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_show_version </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the version information of the CRuby interpreter to stdout. </p>

<p>Definition at line <a class="el" href="../../d2/d0b/version_8c_source.html#l00141">141</a> of file <a class="el" href="../../d2/d0b/version_8c_source.html">version.c</a>.</p>

<p>References <a class="el" href="../../d2/d0b/version_8c_source.html#l00017">PRINT</a>.</p>

<p>Referenced by <a class="el" href="../../df/d77/ruby_8c_source.html#l01300">process_options()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa939b6f824daf3e455785b9a8b202ec2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_sysinit </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the process for ruby(1). </p>
<p>This function assumes this process is ruby(1) and it has just started. Usually programs that embeds CRuby interpreter should not call this function, and should do their own initialization. </p>

<p>Definition at line <a class="el" href="../../df/d77/ruby_8c_source.html#l01955">1955</a> of file <a class="el" href="../../df/d77/ruby_8c_source.html">ruby.c</a>.</p>

<p>References <a class="el" href="../../df/d77/ruby_8c_source.html#l00130">argc</a>, <a class="el" href="../../df/d77/ruby_8c_source.html#l00131">argv</a>, <a class="el" href="../../df/d77/ruby_8c_source.html#l01919">fill_standard_fds()</a>, <a class="el" href="../../df/d77/ruby_8c.html#acd52979fc7e48d3c41f1009fb67d7e62">origarg</a>, and <a class="el" href="../../d5/df2/win32_8c_source.html#l00723">rb_w32_sysinit()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 4 2013 03:25:25 for Ruby by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
